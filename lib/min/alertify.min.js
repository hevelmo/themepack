!function(e,t){"use strict";var n,i=e.document;n=function(){var n,o,r,s,a,l,c,u,d,h,p,f,m,g={},_={},v=!1,y={ENTER:13,ESC:27,SPACE:32},b=[];return _={buttons:{holder:'<nav class="alertify-buttons">{{buttons}}</nav>',submit:'<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',ok:'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',cancel:'<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>'},input:'<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>',message:'<p class="alertify-message">{{message}}</p>',log:'<article class="alertify-log{{class}}">{{message}}</article>'},m=function(){var e,n,o=!1,r=i.createElement("fakeelement"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(e in s)if(r.style[e]!==t){n=s[e],o=!0;break}return{type:n,supported:o}},n=function(e){return i.getElementById(e)},g={labels:{ok:"OK",cancel:"Cancel"},delay:5e3,buttonReverse:!1,buttonFocus:"ok",transition:t,addListeners:function(e){var t,n,l,c,u,d="undefined"!=typeof r,h="undefined"!=typeof o,p="undefined"!=typeof f,m="",g=this;t=function(t){return"undefined"!=typeof t.preventDefault&&t.preventDefault(),l(t),"undefined"!=typeof f&&(m=f.value),"function"==typeof e&&("undefined"!=typeof f?e(!0,m):e(!0)),!1},n=function(t){return"undefined"!=typeof t.preventDefault&&t.preventDefault(),l(t),"function"==typeof e&&e(!1),!1},l=function(){g.hide(),g.unbind(i.body,"keyup",c),g.unbind(s,"focus",u),d&&g.unbind(r,"click",t),h&&g.unbind(o,"click",n)},c=function(e){var i=e.keyCode;(i===y.SPACE&&!p||p&&i===y.ENTER)&&t(e),i===y.ESC&&h&&n(e)},u=function(){p?f.focus():!h||g.buttonReverse?r.focus():o.focus()},this.bind(s,"focus",u),this.bind(a,"focus",u),d&&this.bind(r,"click",t),h&&this.bind(o,"click",n),this.bind(i.body,"keyup",c),this.transition.supported||this.setFocus()},bind:function(e,t,n){"function"==typeof e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},handleErrors:function(){if("undefined"!=typeof e.onerror){var t=this;return e.onerror=function(e,n,i){t.error("["+e+" on line "+i+" of "+n+"]",0)},!0}return!1},appendButtons:function(e,t){return this.buttonReverse?t+e:e+t},build:function(e){var t="",n=e.type,i=e.message,o=e.cssClass||"";switch(t+='<div class="alertify-dialog">',t+='<a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>',"none"===g.buttonFocus&&(t+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>'),"prompt"===n&&(t+='<div id="alertify-form">'),t+='<article class="alertify-inner">',t+=_.message.replace("{{message}}",i),"prompt"===n&&(t+=_.input),t+=_.buttons.holder,t+="</article>","prompt"===n&&(t+="</div>"),t+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>',t+="</div>",n){case"confirm":t=t.replace("{{buttons}}",this.appendButtons(_.buttons.cancel,_.buttons.ok)),t=t.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"prompt":t=t.replace("{{buttons}}",this.appendButtons(_.buttons.cancel,_.buttons.submit)),t=t.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"alert":t=t.replace("{{buttons}}",_.buttons.ok),t=t.replace("{{ok}}",this.labels.ok)}return d.className="alertify alertify-"+n+" "+o,u.className="alertify-cover",t},close:function(e,t){var n,i,o=t&&!isNaN(t)?+t:this.delay,r=this;this.bind(e,"click",function(){n(e)}),i=function(e){e.stopPropagation(),r.unbind(this,r.transition.type,i),h.removeChild(this),h.hasChildNodes()||(h.className+=" alertify-logs-hidden")},n=function(e){"undefined"!=typeof e&&e.parentNode===h&&(r.transition.supported?(r.bind(e,r.transition.type,i),e.className+=" alertify-log-hide"):(h.removeChild(e),h.hasChildNodes()||(h.className+=" alertify-logs-hidden")))},0!==t&&setTimeout(function(){n(e)},o)},dialog:function(e,t,n,o,r){c=i.activeElement;var s=function(){h&&null!==h.scrollTop&&u&&null!==u.scrollTop||s()};if("string"!=typeof e)throw new Error("message must be a string");if("string"!=typeof t)throw new Error("type must be a string");if("undefined"!=typeof n&&"function"!=typeof n)throw new Error("fn must be a function");return this.init(),s(),b.push({type:t,message:e,callback:n,placeholder:o,cssClass:r}),v||this.setup(),this},extend:function(e){if("string"!=typeof e)throw new Error("extend method must have exactly one paramter");return function(t,n){return this.log(t,e,n),this}},hide:function(){var e,t=this;b.splice(0,1),b.length>0?this.setup(!0):(v=!1,e=function(n){n.stopPropagation(),t.unbind(d,t.transition.type,e)},this.transition.supported?(this.bind(d,this.transition.type,e),d.className="alertify alertify-hide alertify-hidden"):d.className="alertify alertify-hide alertify-hidden alertify-isHidden",u.className="alertify-cover alertify-cover-hidden",c.focus())},init:function(){i.createElement("nav"),i.createElement("article"),i.createElement("div"),null==n("alertify-cover")&&(u=i.createElement("div"),u.setAttribute("id","alertify-cover"),u.className="alertify-cover alertify-cover-hidden",i.body.appendChild(u)),null==n("alertify")&&(v=!1,b=[],d=i.createElement("div"),d.setAttribute("id","alertify"),d.className="alertify alertify-hidden",i.body.appendChild(d)),null==n("alertify-logs")&&(h=i.createElement("div"),h.setAttribute("id","alertify-logs"),h.className="alertify-logs alertify-logs-hidden",i.body.appendChild(h)),i.body.setAttribute("tabindex","0"),this.transition=m()},log:function(e,t,n){var i=function(){h&&null!==h.scrollTop||i()};return this.init(),i(),h.className="alertify-logs",this.notify(e,t,n),this},notify:function(e,t,n){var o=i.createElement("article");o.className="alertify-log"+("string"==typeof t&&""!==t?" alertify-log-"+t:""),o.innerHTML=e,h.appendChild(o),setTimeout(function(){o.className=o.className+" alertify-log-show"},50),this.close(o,n)},set:function(e){var t;if("object"!=typeof e&&e instanceof Array)throw new Error("args must be an object");for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},setFocus:function(){f?(f.focus(),f.select()):l.focus()},setup:function(e){var i,c=b[0],u=this;v=!0,i=function(e){e.stopPropagation(),u.setFocus(),u.unbind(d,u.transition.type,i)},this.transition.supported&&!e&&this.bind(d,this.transition.type,i),d.innerHTML=this.build(c),s=n("alertify-resetFocus"),a=n("alertify-resetFocusBack"),r=n("alertify-ok")||t,o=n("alertify-cancel")||t,l="cancel"===g.buttonFocus?o:"none"===g.buttonFocus?n("alertify-noneFocus"):r,f=n("alertify-text")||t,p=n("alertify-form")||t,"string"==typeof c.placeholder&&""!==c.placeholder&&(f.value=c.placeholder),e&&this.setFocus(),this.addListeners(c.callback)},unbind:function(e,t,n){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}},{alert:function(e,t,n){return g.dialog(e,"alert",t,"",n),this},confirm:function(e,t,n){return g.dialog(e,"confirm",t,"",n),this},extend:g.extend,init:g.init,log:function(e,t,n){return g.log(e,t,n),this},prompt:function(e,t,n,i){return g.dialog(e,"prompt",t,n,i),this},success:function(e,t){return g.log(e,"success",t),this},error:function(e,t){return g.log(e,"error",t),this},set:function(e){g.set(e)},labels:g.labels,debug:g.handleErrors}},"function"==typeof define?define([],function(){return new n}):"undefined"==typeof e.alertify&&(e.alertify=new n)}(this);
